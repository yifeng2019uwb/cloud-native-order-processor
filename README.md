# üîê Cloud-Native Order Processor

> **Enterprise-grade microservices platform** - JWT + RBAC, IAM role assumption, and defense-in-depth architecture

üîê **[Security Architecture](#-security-architecture)** | üöÄ **[Quick Start](#-quick-start)** | ‚ò∏Ô∏è **[Kubernetes](kubernetes/README.md)**

---

## üéØ Enterprise Microservices Platform

**Production-ready microservices architecture**:
- üîê **JWT + RBAC**: Centralized authentication and role-based access control
- üõ°Ô∏è **IAM Role Assumption**: Secure AWS access without hardcoded credentials
- üîí **Defense-in-Depth**: Multiple security layers from gateway to database
- üìä **Security Monitoring**: Audit logging and compliance tracking

**Built for**: Production deployment, enterprise security patterns, scalable architecture

## üèóÔ∏è System Architecture

**New centralized authentication architecture** with dedicated Auth Service:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   API Gateway   ‚îÇ    ‚îÇ   Auth Service  ‚îÇ    ‚îÇ   Services      ‚îÇ
‚îÇ   (React)       ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Go/Gin)      ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Python)      ‚îÇ    ‚îÇ   (FastAPI)     ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ   - Routing     ‚îÇ    ‚îÇ   - JWT Val.    ‚îÇ    ‚îÇ   - User Mgmt   ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ   - Proxy       ‚îÇ    ‚îÇ   - User Ctx    ‚îÇ    ‚îÇ   - Business    ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ   - Security    ‚îÇ    ‚îÇ   - Security    ‚îÇ    ‚îÇ   - Data        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                                              ‚îÇ
                                ‚îÇ                                              ‚îÇ
                                ‚ñº                                              ‚îÇ
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                    ‚îÇ
                       ‚îÇ   Request       ‚îÇ                                    ‚îÇ
                       ‚îÇ   Forwarding    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ   & Response    ‚îÇ
                       ‚îÇ   Handling      ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Key Patterns Demonstrated:**
- **Service Discovery**: API Gateway routing with Auth Service integration
- **Data Consistency**: Distributed transactions with atomic operations
- **Security**: Centralized authentication via dedicated Auth Service
- **Scalability**: Stateless services + independent Auth Service scaling
- **Network Security**: Backend services isolated from external access

## üîê Security Architecture

**New centralized authentication architecture with enhanced security:**
- üîê **Dedicated Auth Service**: JWT validation and user context extraction
- üèóÔ∏è **Gateway Security**: Pure routing with security header injection
- üõ°Ô∏è **Network Security**: Kubernetes NetworkPolicies and IP whitelisting
- üìä **Security Monitoring**: Essential authentication metrics and alerts
- üîí **Service Isolation**: Backend services only accessible via internal network

**Perfect for**: Production deployment, enterprise security patterns, scalable microservices architecture

## üõ†Ô∏è System Overview

| **Component** | **Technology** | **Purpose** | **Status** | **Deployment** |
|---------------|----------------|-------------|------------|----------------|
| **Frontend** | React 18 + TypeScript | User Interface | ‚úÖ Production | Docker, K8s |
| **API Gateway** | Go + Gin | Routing & Security | ‚úÖ Production | Docker, K8s |
| **Auth Service** | Python + FastAPI | JWT Validation & User Context | ‚úÖ Production | Docker, K8s |
| **User Service** | Python + FastAPI | User Management | ‚úÖ Production | Docker, K8s |
| **Order Service** | Python + FastAPI | Business Logic | ‚úÖ Production | Docker, K8s |
| **Inventory Service** | Python + FastAPI | Asset Management | ‚úÖ Production | Docker, K8s |
| **Database** | DynamoDB | Data Storage | ‚úÖ Production | AWS |
| **Cache** | Redis | Session Management | ‚úÖ Production | Docker, K8s |
| **Container** | Docker + K8s | Orchestration | ‚úÖ Production | Local/Cloud |
| **Monitoring** | Prometheus + Grafana | Essential Auth Metrics | ‚úÖ Production | K8s |

**Deployment**: Docker Compose (local dev) | Kind cluster (local K8s) | EKS (production)

## üöÄ Quick Start

### **Prerequisites**
- Docker and Docker Compose
- Kubernetes (Kind for local development)
- AWS CLI configured
- Node.js 18+ and Python 3.11+

### **Start Everything Locally**

**Quick commands:**
```bash
# Clone and start with Docker
git clone https://github.com/yifeng2019uwb/cloud-native-order-processor
cd cloud-native-order-processor
./deploy.sh all dev
```

**For detailed setup and verification, see:**
- **[Local Development Guide](docs/deployment-guide.md)** - Complete setup instructions
- **[Kubernetes Setup](kubernetes/README.md)** - Local K8s deployment
- **[Service Health Checks](docs/deployment-guide.md#verification)** - How to verify everything works

## üéÆ Local Demo

**Available now:**
- Frontend: http://localhost:80 (after running deploy script)
- Gateway: http://localhost:8080/health
- Complete system running locally with Docker

**Quick start:**
```bash
./deploy.sh all dev
# Then visit http://localhost:80
```

## üê≥ Docker Deployment

> **‚úÖ Available** - Ready for local development and testing

**Quick Start with Docker:**
- **Single Command**: `./deploy.sh all dev`
- **Access Services**: Frontend (80), Gateway (8080), Services (8000-8002)
- **Full Stack**: Complete system running in containers
- **Development Ready**: Hot reload, debugging, testing

**Docker Compose Status**: Production ready with health checks and proper networking

## üöÄ Security Testing

**Test the security implementation:**
```bash
# Start the system
./deploy.sh all dev

# Test authentication and authorization
curl http://localhost:8080/health
```

**For comprehensive security testing, see:**
- **[Security Testing Guide](docs/centralized-authentication-architecture.md)** - Complete security validation
- **[API Testing](integration_tests/README.md)** - Authentication and authorization tests
- **[Security Patterns](docs/design-docs/)** - Detailed security implementation

## üîê Security Implementation

### **What's Implemented**
- **Authentication**: JWT tokens with bcrypt password hashing
- **Authorization**: Role-based access control (public, customer, admin)
- **Input Validation**: Pydantic models with comprehensive validation
- **Audit Logging**: Security events tracked across all services
- **Secrets Management**: Environment-based configuration

### **Security Testing**
```bash
# Run comprehensive security tests
./scripts/test-local.sh --environment dev --all

# Quick health checks
./scripts/smoke-test.sh

# API authentication testing
./scripts/cli-client.sh login
./scripts/cli-client.sh test
```

## ‚ò∏Ô∏è Kubernetes Deployment

### **Local Kubernetes Setup**
```bash
# Check prerequisites first
./scripts/prerequisites-checker.sh

# Deploy with root deployment script
./deploy.sh all dev

# Check deployment status
kubectl get pods -n order-processor
kubectl get services -n order-processor

# Access services (automatic port forwarding)
./scripts/smoke-test.sh

# Manual port forwarding if needed
kubectl port-forward svc/frontend 30003:80 -n order-processor &
kubectl port-forward svc/gateway 30002:8080 -n order-processor &
kubectl port-forward svc/user-service 30004:8000 -n order-processor &
kubectl port-forward svc/inventory-service 30005:8001 -n order-processor &
kubectl port-forward svc/order-service 30006:8002 -n order-processor &
```

### **Kubernetes Features**
- **Deployments**: Multi-replica service deployments
- **Services**: ClusterIP, NodePort, LoadBalancer patterns
- **ConfigMaps/Secrets**: Configuration management
- **Namespaces**: Environment isolation
- **Kustomize**: Environment-specific configurations

## üìä Monitoring

**Currently implemented:**
- ‚úÖ Health checks on all services
- ‚úÖ Structured JSON logging with correlation IDs
- ‚úÖ Prometheus metrics collection setup

**For detailed monitoring design:** See [Monitoring Design](docs/design-docs/monitoring-design.md) and [Monitoring Guide](monitoring/README.md).

## üîß Development Workflow

**For detailed development workflow, see:**
- **[Development Guide](docs/deployment-guide.md)** - Complete development workflow
- **[Build Process](services/build.md)** - Build automation details
- **[Testing Strategy](integration_tests/README.md)** - Testing approach and commands

## üí∞ AWS Integration

**AWS services used:**
- **DynamoDB**: User data, orders, assets
- **IAM**: Service roles with assume role for production
- **Infrastructure**: Terraform-managed with IAM role assumption

**For detailed setup, see:**
- **[AWS Configuration](docs/deployment-guide.md)** - Complete setup guide
- **[Terraform Infrastructure](terraform/README.md)** - Infrastructure details

## üìö Documentation Structure

### **Architecture Documentation**
- **[Architecture Decisions](docs/design-docs/)** - Technology choices and rationale
- **[Build Process](services/build.md)** - Build automation and deployment
- **[Integration Tests](integration_tests/README.md)** - API testing approach
- **[Kubernetes Setup](kubernetes/README.md)** - Container orchestration

### **Implementation Guides**
- **[Local Development](docs/deployment-guide.md)** - Getting started locally
- **[Security Implementation](docs/centralized-authentication-architecture.md)** - Security patterns used
- **[Testing Strategy](docs/testing/)** - Testing approach and coverage

## üéØ Technology Stack

**Enterprise-grade technology stack:**
- üîê **Security**: JWT, RBAC, IAM role assumption, defense-in-depth
- üèóÔ∏è **Microservices**: Secure inter-service communication and validation
- üõ°Ô∏è **Infrastructure**: Kubernetes policies and AWS security patterns
- üìä **Monitoring**: Authentication metrics and alerts

**For detailed technology documentation, see:**
- **[Security Documentation](docs/design-docs/)** - Complete security patterns
- **[Architecture Decisions](docs/design-docs/)** - Technology choices and rationale

## ‚ö†Ô∏è Current Limitations

**Production considerations:**
- üè† **Local Focus**: Primarily designed for local development and testing
- üí∞ **Cost Conscious**: Uses cost-effective AWS services (DynamoDB vs RDS)
- üîê **Security Focus**: Enterprise security patterns and best practices
- üìä **Monitoring**: Essential monitoring with room for expansion

## üöÄ Getting Started

1. **Quick Demo**: Follow the [Quick Start](#-quick-start) above
2. **Detailed Setup**: [Local Development Guide](docs/deployment-guide.md)
3. **New Auth Architecture**: [Centralized Authentication Design](docs/centralized-authentication-architecture.md)
4. **Security Implementation**: [Security Documentation](docs/design-docs/)
5. **Kubernetes Setup**: [Kubernetes Guide](kubernetes/README.md)
6. **API Testing**: [Integration Tests](integration_tests/README.md)

---

**üîê Enterprise-grade security architecture suitable for production environments**

**üõ°Ô∏è Perfect for**: Production deployment, enterprise security patterns, scalable microservices architecture

**üîí Questions about implementation?** Check the [Security Documentation](docs/design-docs/) or open an issue

*Built with security-first principles and production-ready patterns*